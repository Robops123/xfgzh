(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-adddevice-adddevice"],{"12be":function(t,e,i){"use strict";i.r(e);var n=i("c3c5"),a=i("e051");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("a50b");var d,s=i("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"08d4fa0f",null,!1,n["a"],d);e["default"]=l.exports},"163d":function(t,e,i){"use strict";var n=i("ee27");i("4de4"),i("4160"),i("d81d"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i("5db1");var a=n(i("6ebd")),o=n(i("ca5b")),d=n(i("e88e")),s={components:{uniCombox:d.default},data:function(){return{mapReady:!0,result:"",address:"",candidates:[],longitude:"",latitude:"",userName:"",form:{openId:uni.getStorageSync("openid"),imei:"",devName:"",devLocation:"",baiduLatitude:"",baiduLongitude:""},code:"",info:{},choosedLocationId:""}},onLoad:function(t){this.code=t.code,this.getDeviceInfo()},onShow:function(){},methods:{submit:function(){o.default.showLoading();var t={openId:uni.getStorageSync("openid"),devId:this.info.devId,devLocation:this.address,devName:this.info.devName,userName:this.userName,baiduLongitude:this.info.baiduLongitude,baiduLatitude:this.info.baiduLatitude};a.default.apiPost("/toc/device/bindForPerson",t).then((function(t){"0"==t.code?(o.default.showToast("添加成功"),setTimeout((function(){uni.$emit("updateIndex"),uni.navigateBack()}),1e3),o.default.hideLoading()):(o.default.hideLoading(),o.default.showToast(t.msg))})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))},getLocation:function(){var t=this;0!==this.clickNum&&uni.showLoading({title:"获取中...",mask:!0}),this.clickNum>=3?uni.showToast({title:"请稍后尝试！",icon:"none",mask:!0}):(this.clickNum++,uni.getLocation({type:"gcj02",success:function(e){uni.hideLoading(),t.latitude=e.latitude,t.longitude=e.longitude,t.covers[1]={id:1,latitude:e.latitude,longitude:e.longitude,iconPath:"../../static/location.png"};var i=pointInsideCircle([t.latitude,t.longitude],[t.circles[0].latitude,t.circles[0].longitude],t.r/1e5);t.is=i,t.signInfo.latitude=e.latitude,t.signInfo.longitude=e.longitude,t.signInfo.mode=i?"正常打卡":"外勤打卡",t.getAdd()},fail:function(e){uni.hideLoading(),t.address="请检查位置信息！",uni.showToast({title:"请检查位置信息状态！",icon:"none",mask:!0,duration:3e3})}}))},openLocation:function(){uni.navigateTo({url:"../chooseLocation/chooseLocation"})},handler:function(t){var e=t.BMap,i=(t.map,this),n=new e.Geolocation;n.getCurrentPosition((function(t){this.getStatus()==BMAP_STATUS_SUCCESS?(i.form.baiduLatitude=t.latitude,i.form.baiduLongitude=t.longitude):o.default.showToast("获取当前位置失败")}),{enableHighAccuracy:!0})},getClickInfo:function(t){console.log(t.point.lng),console.log(t.point.lat),this.center.lng=t.point.lng,this.center.lat=t.point.lat},getDeviceInfo:function(){var t=this,e={openId:"wx12345678",code:this.code};a.default.apiGet("/toc/device/bindInfo",e).then((function(e){"0"==e.code?t.info=e.data:o.default.showToast(e.msg),o.default.hideLoading()})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))},searchComplete:function(t){console.log(t);var e=[];t.Ir.forEach((function(t){e.filter((function(e){return e.address==t.address})).length<1&&e.push({address:t.address,baiduLongitude:t.point.lng,baiduLatitude:t.point.lat})})),this.candidates=e},getAddress:function(){var t=this,e={page:1,count:10,address:this.address};t.candidates=[],a.default.apiGet("/toc/address/bindList",e).then((function(e){t.candidates=e.rows,o.default.hideLoading()})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))},chooseLocation:function(t){console.log(t),this.address=t.address,this.baiduLongitude=t.baiduLongitude,this.baiduLatitude=t.baiduLatitude,this.info.baiduLatitude=t.baiduLatitude,this.info.baiduLongitude=t.baiduLongitude,this.$forceUpdate()},mapChoose:function(){var t=this,e=this;e.mapReady=!1,uni.chooseLocation({success:function(i){"我的位置"!=i.name?t.address=i.name:t.address=i.address,t.latitude=i.latitude,t.longitude=i.longitude;var n=t.Convert_GCJ02_To_BD09(i.latitude,i.longitude);t.info.baiduLongitude=n.longitude,t.info.baiduLatitude=n.latitude,setTimeout((function(){e.mapReady=!0}),0)}})},Convert_GCJ02_To_BD09:function(t,e){var i=52.35987755982988,n=e,a=t,o=Math.sqrt(n*n+a*a)+2e-5*Math.sin(a*i),d=Math.atan2(a,n)+3e-6*Math.cos(n*i);return e=o*Math.cos(d)+.0065,t=o*Math.sin(d)+.006,{longitude:e,latitude:t}},localSearchClick:function(t){console.log(t)}}};e.default=s},"21d1":function(t,e,i){"use strict";var n={"uni-icons":i("4e08").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-combox"},[t.label?i("v-uni-view",{staticClass:"uni-combox__label",style:t.labelStyle},[i("v-uni-text",[t._v(t._s(t.label))])],1):t._e(),i("v-uni-view",{staticClass:"uni-combox__input-box"},[i("v-uni-input",{staticClass:"uni-combox__input",attrs:{type:"text",placeholder:t.placeholder},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),i("uni-icons",{staticClass:"uni-combox__input-arrow",attrs:{color:"#3f87ff",type:"location-filled",size:"14"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleSelector.apply(void 0,arguments)}}}),t.showSelector?i("v-uni-view",{staticClass:"uni-combox__selector"},[i("v-uni-scroll-view",{staticClass:"uni-combox__selector-scroll",attrs:{"scroll-y":"true"}},[0===t.filterCandidatesLength?i("v-uni-view",{staticClass:"uni-combox__selector-empty"},[i("v-uni-text",[t._v(t._s(t.emptyTips))])],1):t._e(),t._l(t.filterCandidates,(function(e,n){return i("v-uni-view",{key:n,staticClass:"uni-combox__selector-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSelectorClick(n)}}},[i("v-uni-text",{staticStyle:{"z-index":"999"}},[t._v(t._s(e.address))])],1)}))],2)],1):t._e()],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"2c03":function(t,e,i){"use strict";var n=i("ee27");i("4de4"),i("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("4e08")),o={name:"uniCombox",components:{uniIcons:a.default},props:{label:{type:String,default:""},labelWidth:{type:String,default:"auto"},placeholder:{type:String,default:""},candidates:{type:Array,default:function(){return[]}},emptyTips:{type:String,default:"无匹配项"},value:{type:String,default:""}},data:function(){return{showSelector:!1,inputVal:""}},computed:{labelStyle:function(){return"auto"===this.labelWidth?{}:{width:this.labelWidth}},filterCandidates:function(){var t=this;return this.candidates.filter((function(e){return e.address.indexOf(t.inputVal)>-1}))},filterCandidatesLength:function(){return this.filterCandidates.length}},watch:{value:{handler:function(t){this.inputVal=t},immediate:!0}},methods:{toggleSelector:function(){this.showSelector=!this.showSelector},onFocus:function(){this.showSelector=!0},onBlur:function(){var t=this;setTimeout((function(){t.showSelector=!1}),50)},onSelectorClick:function(t){this.inputVal=this.candidates[t].address,this.$emit("click",this.candidates[t]),this.showSelector=!1},onInput:function(){var t=this;setTimeout((function(){t.$emit("input",t.inputVal)}))}}};e.default=o},"389d":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.uni-combox[data-v-f68e0912]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-combox__label[data-v-f68e0912]{font-size:16px;line-height:22px;padding-right:10px;color:#999}.uni-combox__input-box[data-v-f68e0912]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-combox__input[data-v-f68e0912]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:12px;height:22px;line-height:22px}.uni-combox__selector[data-v-f68e0912]{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;top:42px;left:0;width:100%;background-color:#fff;border-radius:6px;-webkit-box-shadow:#ddd 4px 4px 8px,#ddd -4px -4px 8px;box-shadow:#ddd 4px 4px 8px,#ddd -4px -4px 8px;z-index:9999}.uni-combox__selector-scroll[data-v-f68e0912]{max-height:200px;-webkit-box-sizing:border-box;box-sizing:border-box}.uni-combox__selector[data-v-f68e0912]::before{content:"";position:absolute;width:0;height:0;border-bottom:solid 6px #fff;border-right:solid 6px transparent;border-left:solid 6px transparent;left:50%;top:-6px;margin-left:-6px}.uni-combox__selector-empty[data-v-f68e0912],\n.uni-combox__selector-item[data-v-f68e0912]{line-height:36px;font-size:14px;text-align:center;border-bottom:solid 1px #ddd;margin:0 10px;z-index:9999}.uni-combox__selector-empty[data-v-f68e0912]:last-child,\n.uni-combox__selector-item[data-v-f68e0912]:last-child{border-bottom:none}',""]),t.exports=e},"5db1":function(t,e,i){"use strict";function n(){console.log(1)}function a(t){var e={main:[t]};uni.setStorageSync("signInfo",JSON.stringify(e))}function o(t,e){e.main.push(t),uni.setStorageSync("signInfo",JSON.stringify(e))}function d(){var t=uni.getStorageSync("signInfo");if(t)return JSON.parse(t)}function s(){uni.removeStorage({key:"signInfo",success:function(){uni.showToast({title:"重置成功"})}})}function l(t){var e=new Date,i={mode:t.mode,nowT:e,address:t.address,time:t.time,latitude:t.latitude,longitude:t.longitude,remarks:t.remarks};return i}Object.defineProperty(e,"__esModule",{value:!0}),e.handleSignClick=n,e.setSignInfo=a,e.addSignInfo=o,e.getSignInfo=d,e.delSignInfo=s,e.getInfo=l,e.key=void 0;var c="VEEBZ-HJL34-U3LUY-XUBOX-NSUF7-E4BRF";e.key=c},"7cfd":function(t,e,i){"use strict";i.r(e);var n=i("2c03"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"8a4c":function(t,e,i){var n=i("a054");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("91b9dad4",n,!0,{sourceMap:!1,shadowMode:!1})},"907a":function(t,e,i){var n=i("389d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("c7cdd130",n,!0,{sourceMap:!1,shadowMode:!1})},9189:function(t,e,i){"use strict";var n=i("907a"),a=i.n(n);a.a},a054:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-08d4fa0f]{background:#f0f0f0}.yt-list[data-v-08d4fa0f]{margin-top:%?16?%;background:#fff}.yt-list-cell[data-v-08d4fa0f]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?70?%;position:relative}.yt-list-cell.cell-hover[data-v-08d4fa0f]{background:#fafafa}.yt-list-cell.b-b[data-v-08d4fa0f]:after{left:%?30?%}.yt-list-cell .cell-icon[data-v-08d4fa0f]{height:%?32?%;width:%?32?%;font-size:%?22?%;color:#fff;text-align:center;line-height:%?32?%;background:#f85e52;border-radius:%?4?%;margin-right:%?12?%}.yt-list-cell .cell-icon.hb[data-v-08d4fa0f]{background:#ffaa0e}.yt-list-cell .cell-icon.lpk[data-v-08d4fa0f]{background:#3ab54a}.yt-list-cell .cell-tit[data-v-08d4fa0f]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?26?%;color:#696969;margin-right:%?10?%}.yt-list-cell .cell-tip[data-v-08d4fa0f]{font-size:%?26?%;color:#f85e52}.yt-list-cell .cell-tip.disabled[data-v-08d4fa0f]{color:#f85e52}.yt-list-cell .cell-tip.active[data-v-08d4fa0f]{color:#f85e52}.yt-list-cell .cell-tip.red[data-v-08d4fa0f]{color:#f85e52}.yt-list-cell.desc-cell .cell-tit[data-v-08d4fa0f]{max-width:%?160?%}.yt-list-cell .desc[data-v-08d4fa0f]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#a9a9a9}.yt-list-cell uni-switch[data-v-08d4fa0f]{-webkit-transform:translateX(%?16?%) scale(.84);transform:translateX(%?16?%) scale(.84)}.add-btn[data-v-08d4fa0f]{background:#3f87ff!important;border-radius:34px!important;font-size:%?34?%;margin-top:%?40?%;color:#fff;width:80%}.card[data-v-08d4fa0f]{padding:%?20?% %?20?% 0;background-color:#fff;margin:%?30?%;border-radius:8px}.card .line[data-v-08d4fa0f]{padding:%?20?% 0}.card .border-line[data-v-08d4fa0f]{border-bottom:1px solid #f2f2f2}.line > uni-text[data-v-08d4fa0f]{display:inline-block;vertical-align:middle;width:30%}.line > uni-input[data-v-08d4fa0f],\n.line > .input[data-v-08d4fa0f]{font-size:%?28?%;display:inline-block;vertical-align:middle;width:64%;margin-left:5%}.uni-input-placeholder[data-v-08d4fa0f],\nuni-textarea[data-v-08d4fa0f]{font-size:%?28?%}.map-warpper[data-v-08d4fa0f]{position:absolute;left:0;top:0;z-index:99;width:100%;height:100%}.line .pre-title[data-v-08d4fa0f]{display:inline-block;text-align:justify;text-align-last:justify;width:84%}.line .disabled[data-v-08d4fa0f]{background-color:#f3f3f3!important}.line .symbol[data-v-08d4fa0f]{float:left}.map-container > div > div[data-v-08d4fa0f]:nth-of-type(3){display:none}body.?%PAGE?%[data-v-08d4fa0f]{background:#f0f0f0}',""]),t.exports=e},a50b:function(t,e,i){"use strict";var n=i("8a4c"),a=i.n(n);a.a},c3c5:function(t,e,i){"use strict";var n={"uni-combox":i("e88e").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"card"},[i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror symbol"},[t._v("*")]),i("v-uni-text",{staticClass:"pre-title"},[t._v("设备名称")]),i("v-uni-text",{staticClass:"fr"},[t._v(":")])],1),i("v-uni-input",{attrs:{type:"text"},model:{value:t.info.devName,callback:function(e){t.$set(t.info,"devName",e)},expression:"info.devName"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror symbol"},[t._v("*")]),i("v-uni-text",{staticClass:"pre-title"},[t._v("设备型号")]),i("v-uni-text",{staticClass:"fr"},[t._v(":")])],1),i("v-uni-input",{staticClass:"disabled",attrs:{type:"text",disabled:!0},model:{value:t.info.typeName,callback:function(e){t.$set(t.info,"typeName",e)},expression:"info.typeName"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror symbol"},[t._v("*")]),i("v-uni-text",{staticClass:"pre-title"},[t._v("设备编号")]),i("v-uni-text",{staticClass:"fr"},[t._v(":")])],1),i("v-uni-input",{staticClass:"disabled",attrs:{type:"text",disabled:!0},model:{value:t.info.devId,callback:function(e){t.$set(t.info,"devId",e)},expression:"info.devId"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror symbol"},[t._v("*")]),i("v-uni-text",{staticClass:"pre-title"},[t._v(t._s("IMEI码".split("").join(" ")))]),i("v-uni-text",{staticClass:"fr"},[t._v(":")])],1),i("v-uni-input",{staticClass:"disabled",attrs:{type:"text",disabled:!0},model:{value:t.info.imei,callback:function(e){t.$set(t.info,"imei",e)},expression:"info.imei"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror symbol"},[t._v("*")]),i("v-uni-text",{staticClass:"pre-title"},[t._v("姓名")]),i("v-uni-text",{staticClass:"fr"},[t._v(":")])],1),i("v-uni-input",{attrs:{type:"text"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror symbol"},[t._v("*")]),i("v-uni-text",{staticClass:"pre-title"},[t._v("地址")]),i("v-uni-text",{staticClass:"fr"},[t._v(":")])],1),i("uni-combox",{staticClass:"input",attrs:{candidates:t.candidates,value:t.address},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseLocation.apply(void 0,arguments)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),i("v-uni-view",{staticStyle:{"text-align":"center"}},[i("v-uni-button",{staticClass:"add-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确定添加")])],1),i("v-uni-view",{staticClass:"yt-list-cell desc-cell map-container"},[t.mapReady?i("baidu-map",{staticStyle:{width:"100%",height:"500upx","margin-top":"100upx"},attrs:{center:{lng:t.info.baiduLongitude,lat:t.info.baiduLatitude},zoom:18},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.localSearchClick.apply(void 0,arguments)},ready:function(e){arguments[0]=e=t.$handleEvent(e),t.handler.apply(void 0,arguments)}}},[i("bm-marker",{attrs:{position:{lng:t.info.baiduLongitude,lat:t.info.baiduLatitude},dragging:!1,zIndex:999999999}}),i("bm-local-search",{attrs:{keyword:t.address,"auto-viewport":!0},on:{searchcomplete:function(e){arguments[0]=e=t.$handleEvent(e),t.searchComplete.apply(void 0,arguments)}}})],1):t._e()],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},ca5b:function(t,e,i){"use strict";var n=i("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("c964"));if(!o)var o={};function d(){return s.apply(this,arguments)}function s(){return s=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showLoading({title:"请等待",mask:!0});case 1:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function l(){return c.apply(this,arguments)}function c(){return c=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.hideLoading();case 1:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function u(t){return r.apply(this,arguments)}function r(){return r=(0,a.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showToast({title:e||e.msg,mask:!0,icon:0==e.status?"success":"",duration:1500});case 1:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}o.PATH="http://47.103.152.26/api";var f={showLoading:d,hideLoading:l,showToast:u};e.default=f},e051:function(t,e,i){"use strict";i.r(e);var n=i("163d"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},e88e:function(t,e,i){"use strict";i.r(e);var n=i("21d1"),a=i("7cfd");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("9189");var d,s=i("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"f68e0912",null,!1,n["a"],d);e["default"]=l.exports}}]);