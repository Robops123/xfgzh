(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-adddevice-adddevice"],{"12be":function(t,e,i){"use strict";i.r(e);var n=i("d01d"),a=i("e051");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("fd3d");var l,d=i("f0c5"),s=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"57463926",null,!1,n["a"],l);e["default"]=s.exports},"163d":function(t,e,i){"use strict";var n=i("ee27");i("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i("5db1");var a=n(i("6ebd")),o=n(i("ca5b")),l=n(i("e88e")),d={components:{uniCombox:l.default},data:function(){return{mapReady:!0,result:"",address:"",candidates:[],form:{openId:uni.getStorageSync("openid"),imei:"",devName:"",devLocation:"",baiduLatitude:"",baiduLongitude:""},code:"",info:"",choosedLocationId:""}},onLoad:function(t){this.code=t.code,this.getDeviceInfo()},onShow:function(){},methods:{submit:function(){o.default.showLoading();var t={openId:uni.getStorageSync("openid"),devId:this.info.devId,addressId:this.choosedLocationId,devName:this.info.devName};a.default.apiPost("/toc/device/bind",t).then((function(t){"0"==t.code?(o.default.showToast("添加成功"),setTimeout((function(){uni.$emit("updateIndex"),uni.navigateBack()}),1e3),o.default.hideLoading()):(o.default.hideLoading(),o.default.showToast(t.msg))})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))},getLocation:function(){var t=this;0!==this.clickNum&&uni.showLoading({title:"获取中...",mask:!0}),this.clickNum>=3?uni.showToast({title:"请稍后尝试！",icon:"none",mask:!0}):(this.clickNum++,uni.getLocation({type:"gcj02",success:function(e){uni.hideLoading(),t.latitude=e.latitude,t.longitude=e.longitude,t.covers[1]={id:1,latitude:e.latitude,longitude:e.longitude,iconPath:"../../static/location.png"};var i=pointInsideCircle([t.latitude,t.longitude],[t.circles[0].latitude,t.circles[0].longitude],t.r/1e5);t.is=i,t.signInfo.latitude=e.latitude,t.signInfo.longitude=e.longitude,t.signInfo.mode=i?"正常打卡":"外勤打卡",t.getAdd()},fail:function(e){uni.hideLoading(),t.address="请检查位置信息！",uni.showToast({title:"请检查位置信息状态！",icon:"none",mask:!0,duration:3e3})}}))},openLocation:function(){uni.navigateTo({url:"../chooseLocation/chooseLocation"})},handler:function(t){var e=t.BMap,i=(t.map,this),n=new e.Geolocation;n.getCurrentPosition((function(t){this.getStatus()==BMAP_STATUS_SUCCESS?(i.form.baiduLatitude=t.latitude,i.form.baiduLongitude=t.longitude):o.default.showToast("获取当前位置失败")}),{enableHighAccuracy:!0})},getClickInfo:function(t){console.log(t.point.lng),console.log(t.point.lat),this.center.lng=t.point.lng,this.center.lat=t.point.lat},getDeviceInfo:function(){var t=this,e={openId:uni.getStorageSync("openid"),code:this.code};a.default.apiGet("/toc/device/bindInfo",e).then((function(e){"0"==e.code?t.info=e.data:o.default.showToast(e.msg),o.default.hideLoading()})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))},getAddress:function(){var t=this,e={page:1,count:10,address:this.address};t.candidates=[],a.default.apiGet("/toc/address/bindList",e).then((function(e){t.candidates=e.rows,o.default.hideLoading()})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))},chooseLocation:function(t){this.choosedLocationId=t}}};e.default=d},"2c03":function(t,e,i){"use strict";var n=i("ee27");i("4de4"),i("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("4e08")),o={name:"uniCombox",components:{uniIcons:a.default},props:{label:{type:String,default:""},labelWidth:{type:String,default:"auto"},placeholder:{type:String,default:""},candidates:{type:Array,default:function(){return[]}},emptyTips:{type:String,default:"无匹配项"},value:{type:String,default:""}},data:function(){return{showSelector:!1,inputVal:""}},computed:{labelStyle:function(){return"auto"===this.labelWidth?{}:{width:this.labelWidth}},filterCandidates:function(){var t=this;return this.candidates.filter((function(e){return e.address.indexOf(t.inputVal)>-1}))},filterCandidatesLength:function(){return this.filterCandidates.length}},watch:{value:{handler:function(t){console.log(t),this.inputVal=t},immediate:!0}},methods:{toggleSelector:function(){this.showSelector=!this.showSelector},onFocus:function(){this.showSelector=!0},onBlur:function(){var t=this;setTimeout((function(){t.showSelector=!1}),50)},onSelectorClick:function(t){this.inputVal=this.filterCandidates[t].address,this.showSelector=!1,this.$emit("click",this.filterCandidates[t].id)},onInput:function(){var t=this;setTimeout((function(){t.$emit("input",t.inputVal)}))}}};e.default=o},"522a":function(t,e,i){var n=i("81fb");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("33d21f9b",n,!0,{sourceMap:!1,shadowMode:!1})},"5db1":function(t,e,i){"use strict";function n(){console.log(1)}function a(t){var e={main:[t]};uni.setStorageSync("signInfo",JSON.stringify(e))}function o(t,e){e.main.push(t),uni.setStorageSync("signInfo",JSON.stringify(e))}function l(){var t=uni.getStorageSync("signInfo");if(t)return JSON.parse(t)}function d(){uni.removeStorage({key:"signInfo",success:function(){uni.showToast({title:"重置成功"})}})}function s(t){var e=new Date,i={mode:t.mode,nowT:e,address:t.address,time:t.time,latitude:t.latitude,longitude:t.longitude,remarks:t.remarks};return i}Object.defineProperty(e,"__esModule",{value:!0}),e.handleSignClick=n,e.setSignInfo=a,e.addSignInfo=o,e.getSignInfo=l,e.delSignInfo=d,e.getInfo=s,e.key=void 0;var c="VEEBZ-HJL34-U3LUY-XUBOX-NSUF7-E4BRF";e.key=c},"72c8":function(t,e,i){var n=i("e041");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("ee77c9b8",n,!0,{sourceMap:!1,shadowMode:!1})},"7cfd":function(t,e,i){"use strict";i.r(e);var n=i("2c03"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"81fb":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-57463926]{background:#f0f0f0}.yt-list[data-v-57463926]{margin-top:%?16?%;background:#fff}.yt-list-cell[data-v-57463926]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?70?%;position:relative}.yt-list-cell.cell-hover[data-v-57463926]{background:#fafafa}.yt-list-cell.b-b[data-v-57463926]:after{left:%?30?%}.yt-list-cell .cell-icon[data-v-57463926]{height:%?32?%;width:%?32?%;font-size:%?22?%;color:#fff;text-align:center;line-height:%?32?%;background:#f85e52;border-radius:%?4?%;margin-right:%?12?%}.yt-list-cell .cell-icon.hb[data-v-57463926]{background:#ffaa0e}.yt-list-cell .cell-icon.lpk[data-v-57463926]{background:#3ab54a}.yt-list-cell .cell-tit[data-v-57463926]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?26?%;color:#696969;margin-right:%?10?%}.yt-list-cell .cell-tip[data-v-57463926]{font-size:%?26?%;color:#f85e52}.yt-list-cell .cell-tip.disabled[data-v-57463926]{color:#f85e52}.yt-list-cell .cell-tip.active[data-v-57463926]{color:#f85e52}.yt-list-cell .cell-tip.red[data-v-57463926]{color:#f85e52}.yt-list-cell.desc-cell .cell-tit[data-v-57463926]{max-width:%?160?%}.yt-list-cell .desc[data-v-57463926]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#a9a9a9}.yt-list-cell uni-switch[data-v-57463926]{-webkit-transform:translateX(%?16?%) scale(.84);transform:translateX(%?16?%) scale(.84)}.add-btn[data-v-57463926]{background:#3f87ff!important;border-radius:34px!important;font-size:%?34?%;margin-top:%?40?%;color:#fff;width:80%}.card[data-v-57463926]{padding:%?20?% %?20?% 0;background-color:#fff;margin:%?30?%;border-radius:8px}.card .line[data-v-57463926]{padding:%?20?% 0}.card .border-line[data-v-57463926]{border-bottom:1px solid #f2f2f2}.line > uni-text[data-v-57463926]{display:inline-block;vertical-align:middle;width:30%;text-align:right}.line > uni-input[data-v-57463926],\n.line > .input[data-v-57463926]{font-size:%?28?%;display:inline-block;vertical-align:middle;width:64%;margin-left:5%}.uni-input-placeholder[data-v-57463926],\nuni-textarea[data-v-57463926]{font-size:%?28?%}.map-warpper[data-v-57463926]{position:absolute;left:0;top:0;z-index:99;width:100%;height:100%}body.?%PAGE?%[data-v-57463926]{background:#f0f0f0}',""]),t.exports=e},"9e9c":function(t,e,i){"use strict";var n={"uni-icons":i("4e08").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-combox"},[t.label?i("v-uni-view",{staticClass:"uni-combox__label",style:t.labelStyle},[i("v-uni-text",[t._v(t._s(t.label))])],1):t._e(),i("v-uni-view",{staticClass:"uni-combox__input-box"},[i("v-uni-input",{staticClass:"uni-combox__input",attrs:{type:"text",placeholder:t.placeholder},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),i("uni-icons",{staticClass:"uni-combox__input-arrow",attrs:{color:"#3f87ff",type:"location-filled",size:"14"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleSelector.apply(void 0,arguments)}}}),t.showSelector?i("v-uni-view",{staticClass:"uni-combox__selector"},[i("v-uni-scroll-view",{staticClass:"uni-combox__selector-scroll",attrs:{"scroll-y":"true"}},[0===t.filterCandidatesLength?i("v-uni-view",{staticClass:"uni-combox__selector-empty"},[i("v-uni-text",[t._v(t._s(t.emptyTips))])],1):t._e(),t._l(t.filterCandidates,(function(e,n){return i("v-uni-view",{key:n,staticClass:"uni-combox__selector-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSelectorClick(n)}}},[i("v-uni-text",[t._v(t._s(e.address))])],1)}))],2)],1):t._e()],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},c54b:function(t,e,i){"use strict";var n=i("72c8"),a=i.n(n);a.a},ca5b:function(t,e,i){"use strict";var n=i("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("c964"));if(!o)var o={};function l(){return d.apply(this,arguments)}function d(){return d=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showLoading({title:"请等待",mask:!0});case 1:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function s(){return c.apply(this,arguments)}function c(){return c=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.hideLoading();case 1:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function r(t){return u.apply(this,arguments)}function u(){return u=(0,a.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showToast({title:e||e.msg,mask:!0,icon:0==e.status?"success":"",duration:1500});case 1:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}o.PATH="http://47.103.152.26/api";var f={showLoading:l,hideLoading:s,showToast:r};e.default=f},d01d:function(t,e,i){"use strict";var n={"uni-combox":i("e88e").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"card"},[i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror"},[t._v("*")]),t._v("设备型号:")],1),i("v-uni-input",{attrs:{type:"text",disabled:!0},model:{value:t.info.typeName,callback:function(e){t.$set(t.info,"typeName",e)},expression:"info.typeName"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror"},[t._v("*")]),t._v("设备名称:")],1),i("v-uni-input",{attrs:{type:"text",disabled:!0},model:{value:t.info.devName,callback:function(e){t.$set(t.info,"devName",e)},expression:"info.devName"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror"},[t._v("*")]),t._v("设备编号:")],1),i("v-uni-input",{attrs:{type:"text",disabled:!0},model:{value:t.info.devId,callback:function(e){t.$set(t.info,"devId",e)},expression:"info.devId"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror"},[t._v("*")]),t._v("地址:")],1),i("uni-combox",{staticClass:"input",attrs:{candidates:t.candidates,value:t.address},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.getAddress.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseLocation.apply(void 0,arguments)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror"},[t._v("*")]),t._v("设备批次址:")],1),i("v-uni-input",{attrs:{type:"text",disabled:!0},model:{value:t.info.devLocation,callback:function(e){t.$set(t.info,"devLocation",e)},expression:"info.devLocation"}})],1),i("v-uni-view",{staticClass:"line border-line"},[i("v-uni-text",[i("v-uni-text",{staticClass:"cerror"},[t._v("*")]),t._v("设备本地编码:")],1),i("v-uni-input",{attrs:{type:"text",disabled:!0},model:{value:t.info.imei,callback:function(e){t.$set(t.info,"imei",e)},expression:"info.imei"}})],1)],1),i("v-uni-view",{staticStyle:{"text-align":"center"}},[i("v-uni-button",{staticClass:"add-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确定添加")])],1),i("v-uni-view",{staticClass:"yt-list-cell desc-cell"},[i("v-uni-view",{staticClass:"map-warpper"}),i("baidu-map",{class:{sharemap:1==t.type},staticStyle:{width:"100%",height:"500upx","margin-top":"100upx"},attrs:{center:{lng:t.info.baiduLongitude,lat:t.info.baiduLatitude},zoom:15},on:{ready:function(e){arguments[0]=e=t.$handleEvent(e),t.handler.apply(void 0,arguments)}}},[i("bm-marker",{attrs:{position:{lng:t.info.baiduLongitude,lat:t.info.baiduLatitude},dragging:!1,zIndex:999999999}})],1)],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},e041:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.uni-combox[data-v-162f1a68]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-combox__label[data-v-162f1a68]{font-size:16px;line-height:22px;padding-right:10px;color:#999}.uni-combox__input-box[data-v-162f1a68]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uni-combox__input[data-v-162f1a68]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:12px;height:22px;line-height:22px}.uni-combox__selector[data-v-162f1a68]{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;top:42px;left:0;width:100%;background-color:#fff;border-radius:6px;-webkit-box-shadow:#ddd 4px 4px 8px,#ddd -4px -4px 8px;box-shadow:#ddd 4px 4px 8px,#ddd -4px -4px 8px;z-index:2}.uni-combox__selector-scroll[data-v-162f1a68]{max-height:200px;-webkit-box-sizing:border-box;box-sizing:border-box}.uni-combox__selector[data-v-162f1a68]::before{content:"";position:absolute;width:0;height:0;border-bottom:solid 6px #fff;border-right:solid 6px transparent;border-left:solid 6px transparent;left:50%;top:-6px;margin-left:-6px}.uni-combox__selector-empty[data-v-162f1a68],\n.uni-combox__selector-item[data-v-162f1a68]{line-height:36px;font-size:14px;text-align:center;border-bottom:solid 1px #ddd;margin:0 10px;z-index:9999}.uni-combox__selector-empty[data-v-162f1a68]:last-child,\n.uni-combox__selector-item[data-v-162f1a68]:last-child{border-bottom:none}',""]),t.exports=e},e051:function(t,e,i){"use strict";i.r(e);var n=i("163d"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},e88e:function(t,e,i){"use strict";i.r(e);var n=i("9e9c"),a=i("7cfd");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("c54b");var l,d=i("f0c5"),s=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"162f1a68",null,!1,n["a"],l);e["default"]=s.exports},fd3d:function(t,e,i){"use strict";var n=i("522a"),a=i.n(n);a.a}}]);