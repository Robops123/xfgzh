(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-loginDW"],{"1de5":function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"33f2":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("c964"));if(!o)var o={};function s(){return r.apply(this,arguments)}function r(){return r=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showLoading({title:"请等待",mask:!0});case 1:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return d=(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.hideLoading();case 1:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function c(t){return l.apply(this,arguments)}function l(){return l=(0,a.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showToast({title:e||e.msg,mask:!0,icon:0==e.status?"success":"",duration:1500});case 1:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}o.PATH="http://47.103.152.26/api";var f={showLoading:s,hideLoading:u,showToast:c};e.default=f},"3ba5":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:" login-bg"},[n("v-uni-view",{staticClass:"appname",staticStyle:{"margin-top":"100upx"}},[t._v("锡消宝")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"step"},[n("v-uni-view",{staticClass:"step-btn",class:{active:0==t.active}},[t._v("登录")]),n("v-uni-view",{staticClass:"line"}),n("v-uni-view",{staticClass:"step-btn step-btn1",class:{active:1==t.active}},[t._v("认证绑定")])],1),0==t.active?n("v-uni-view",{},[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",[t._v("账号")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"tel",name:"",placeholder:"请输入手机号码"},model:{value:t.loginName,callback:function(e){t.loginName=e},expression:"loginName"}})],1),n("v-uni-view",[t._v("密码")]),n("v-uni-view",{staticClass:"uni-form-item uni-column "},[n("v-uni-view",{staticStyle:{position:"relative",padding:"10upx 0"}},[n("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",name:"",placeholder:"请输入验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),n("v-uni-button",{staticClass:"veribtn",attrs:{disabled:!t.show},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode.apply(void 0,arguments)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[t._v("获取验证码")]),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v(t._s(t.count)+" s")])])],1)],1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("登录")])],1):t._e(),1==t.active&t.hasAccount?n("v-uni-view",{},[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",[t._v("账号")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"tel",name:"",placeholder:"用户名称 xxx@xxx"},model:{value:t.loginName,callback:function(e){t.loginName=e},expression:"loginName"}})],1),n("v-uni-view",{staticClass:"uni-form-item uni-column "},[n("v-uni-view",[t._v("密码")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",name:"",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("认证&绑定")])],1):t._e()],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"48e6":function(t,e,n){t.exports=n.p+"static/img/bg.1225a147.png"},"4dc0":function(t,e,n){"use strict";var i=n("e61a"),a=n.n(i);a.a},5475:function(t,e,n){var i=n("24fb"),a=n("1de5"),o=n("48e6");e=i(!1);var s=a(o);e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.content[data-v-048f00d0]{padding:%?50?% %?20?%;margin:0 %?30?% 0;background-color:#fff;border-radius:8px 8px 0 0;box-shadow:0 0 8px #ccc}.logo[data-v-048f00d0]{text-align:center}.logo uni-image[data-v-048f00d0]{height:%?200?%;width:%?200?%;margin:0 0 %?60?%}.uni-form-item[data-v-048f00d0]{margin-bottom:%?40?%;padding:0;border-bottom:1px solid #e3e3e3;position:relative}.uni-form-item .uni-input[data-v-048f00d0]{font-size:%?30?%;padding:2px 0}.links[data-v-048f00d0]{text-align:center;margin-top:%?40?%;font-size:%?26?%;color:#999}.links uni-view[data-v-048f00d0]{display:inline-block;vertical-align:top;margin:0 %?10?%}.links .link-highlight[data-v-048f00d0]{color:#fa436a}.column-with-btn[data-v-048f00d0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.column-with-btn uni-button[data-v-048f00d0]{font-size:%?24?%;margin:0;width:%?180?%;text-align:center}.column-with-btn uni-button[data-v-048f00d0]:after{border:none}.column-with-btn uni-button.active[data-v-048f00d0]{background-color:#fa436a;color:#fff}.uni-column uni-button[type="primary"][data-v-048f00d0]{background-color:#0f87f5;border-radius:0;font-size:%?34?%;float:right}.veribtn[data-v-048f00d0]{position:absolute;right:0;top:%?-10?%;height:100%;margin-top:0;line-height:%?56?%;background-color:#fff;color:#3f87ff;border:1px solid #3f87ff}.regBtn[data-v-048f00d0]{background:none;color:#0f87f5;border:none!important;font-size:%?30?%}.regBtn[data-v-048f00d0]::after{display:none}.login-bg[data-v-048f00d0]{background-image:url('+s+");background-size:100%;background-repeat:no-repeat;padding-top:%?110?%;border-top:0}.login-btn[data-v-048f00d0]{background:#3f87ff!important;border-radius:34px!important}.step[data-v-048f00d0]{display:-webkit-box;display:-webkit-flex;display:flex;width:60%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:%?20?% auto}.step-btn[data-v-048f00d0]{width:%?80?%;height:%?80?%;line-height:%?80?%;text-align:center;border-radius:50%;background-color:#cbcdd0;color:#fff}.step .step-btn1[data-v-048f00d0]{line-height:%?40?%}.step .line[data-v-048f00d0]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin:0 %?20?%;border-top:1px dashed #d2c2c2}.step-btn.active[data-v-048f00d0]{background-color:#1d76fb}",""]),t.exports=e},"95fc":function(t,e,n){"use strict";n.r(e);var i=n("3ba5"),a=n("d402");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("4dc0");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"048f00d0",null,!1,i["a"],s);e["default"]=u.exports},d402:function(t,e,n){"use strict";n.r(e);var i=n("db78"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},db78:function(t,e,n){"use strict";var i=n("ee27");n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("2be1")),o=i(n("33f2")),s={components:{},data:function(){return{openId:"",hasAccount:!1,loginName:"",password:"",active:0,steps:[{title:"登录"},{title:"认证&绑定"}],code:"",seconds:10,count:60,timer:null,show:!0}},onLoad:function(){var t=this.getUrlParam("code"),e=this;null!=t&&this.getOpenId(t),uni.$once("registered",(function(){e.hasAccount=!0,e.active=1}))},methods:{login:function(){if(""!=this.loginName)if(""==this.password)o.default.showToast("请输入登录密码");else{o.default.showLoading();var t={openId:uni.getStorageSync("openid"),loginName:this.loginName,password:this.password};a.default.apiPost("/tob/user/login",t).then((function(t){"0"==t.code?(uni.setStorageSync("usertype","dw"),uni.setStorageSync("openid",t.data.openId),uni.setStorageSync("userinfo",t.data),uni.switchTab({url:"/pages/index/index"}),o.default.hideLoading()):(o.default.hideLoading(),o.default.showToast(t.msg))})).catch((function(t){o.default.hideLoading(),o.default.showToast(t)}))}else o.default.showToast("请输入用户名")},rz:function(){uni.setStorageSync("usertype","dw"),uni.switchTab({url:"/pages/index/index"})},getCode:function(){var t=this;t.settimer()},settimer:function(){var t=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval((function(){t.count>0&&t.count<=60?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)}),1e3))},gotoRegistration:function(){uni.navigateTo({url:"registration"})},gotoForgetPassword:function(){uni.navigateTo({url:"forget-password"})},getUrlParam:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.href.split("#")[0],i=n.split("?")[1];if(i){var a=i.substr(0).match(e);return null!==a?unescape(a[2]):null}return null},getOpenId:function(t){o.default.showLoading();var e={code:t},n=this;a.default.apiGet("/toc/tocUser/getOpenId",e).then((function(t){"0"==t.code?(o.default.hideLoading(),n.openId=t.openId,uni.setStorageSync("openid",t.openId),n.findUser()):(o.default.hideLoading(),o.default.showToast("请在微信环境下打开"))})).catch((function(t){o.default.hideLoading(),o.default.showToast("网络错误")}))},findUser:function(){o.default.showLoading();var t={openId:this.openId,userType:1},e=this;a.default.apiGet("/toc/tocUser/find",t).then((function(t){"0"==t.code?(uni.setStorageSync("usertype","dw"),uni.setStorageSync("openid",e.openId),uni.setStorageSync("userinfo",t.data),uni.switchTab({url:"/pages/index/index"})):"3"==t.code?(e.active=1,e.hasAccount=!0):uni.redirectTo({url:"./registration?userType=1"}),o.default.hideLoading()})).catch((function(t){o.default.hideLoading(),o.default.showToast("网络错误")}))}}};e.default=s},e61a:function(t,e,n){var i=n("5475");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("67bae974",i,!0,{sourceMap:!1,shadowMode:!1})}}]);