(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-loginDW"],{"0057":function(e,t,n){e.exports=n.p+"static/img/bg.1225a147.png"},"16d6":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:" login-bg"},[n("v-uni-view",{staticClass:"appname",staticStyle:{"margin-top":"100upx"}},[e._v("未蓝消防")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"step"},[n("v-uni-view",{staticClass:"step-btn",class:{active:0==e.active}},[e._v("登录")]),n("v-uni-view",{staticClass:"line"}),n("v-uni-view",{staticClass:"step-btn step-btn1",class:{active:1==e.active}},[e._v("认证绑定")])],1),0==e.active?n("v-uni-view",{},[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",[e._v("账号")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"tel",name:"",placeholder:"请输入手机号码"},model:{value:e.loginName,callback:function(t){e.loginName=t},expression:"loginName"}})],1),n("v-uni-view",[e._v("密码")]),n("v-uni-view",{staticClass:"uni-form-item uni-column "},[n("v-uni-view",{staticStyle:{position:"relative",padding:"10upx 0"}},[n("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",name:"",placeholder:"请输入验证码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-uni-button",{staticClass:"veribtn",attrs:{disabled:!e.show},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode.apply(void 0,arguments)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v("获取验证码")]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+" s")])])],1)],1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("登录")])],1):e._e(),1==e.active&e.hasAccount?n("v-uni-view",{},[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",[e._v("账号")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"tel",name:"",placeholder:"用户名称 xxx@xxx"},model:{value:e.loginName,callback:function(t){e.loginName=t},expression:"loginName"}})],1),n("v-uni-view",{staticClass:"uni-form-item uni-column "},[n("v-uni-view",[e._v("密码")]),n("v-uni-input",{staticClass:"uni-input",attrs:{type:"text",name:"",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("认证&绑定")])],1):e._e()],1)],1)},o=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}))},"1de5":function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},"2f9c":function(e,t,n){var i=n("3605");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("dfe1a258",i,!0,{sourceMap:!1,shadowMode:!1})},3605:function(e,t,n){var i=n("24fb"),a=n("1de5"),o=n("0057");t=i(!1);var s=a(o);t.push([e.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.content[data-v-eebc4fac]{padding:%?50?% %?20?%;margin:0 %?30?% 0;background-color:#fff;border-radius:8px 8px 0 0;-webkit-box-shadow:0 0 8px #ccc;box-shadow:0 0 8px #ccc}.logo[data-v-eebc4fac]{text-align:center}.logo uni-image[data-v-eebc4fac]{height:%?200?%;width:%?200?%;margin:0 0 %?60?%}.uni-form-item[data-v-eebc4fac]{margin-bottom:%?40?%;padding:0;border-bottom:1px solid #e3e3e3;position:relative}.uni-form-item .uni-input[data-v-eebc4fac]{font-size:%?30?%;padding:2px 0}.links[data-v-eebc4fac]{text-align:center;margin-top:%?40?%;font-size:%?26?%;color:#999}.links uni-view[data-v-eebc4fac]{display:inline-block;vertical-align:top;margin:0 %?10?%}.links .link-highlight[data-v-eebc4fac]{color:#fa436a}.column-with-btn[data-v-eebc4fac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.column-with-btn uni-button[data-v-eebc4fac]{font-size:%?24?%;margin:0;width:%?180?%;text-align:center}.column-with-btn uni-button[data-v-eebc4fac]:after{border:none}.column-with-btn uni-button.active[data-v-eebc4fac]{background-color:#fa436a;color:#fff}.uni-column uni-button[type="primary"][data-v-eebc4fac]{background-color:#0f87f5;border-radius:0;font-size:%?34?%;float:right}.veribtn[data-v-eebc4fac]{position:absolute;right:0;top:%?-10?%;height:100%;margin-top:0;line-height:%?56?%;background-color:#fff;color:#3f87ff;border:1px solid #3f87ff}.regBtn[data-v-eebc4fac]{background:none;color:#0f87f5;border:none!important;font-size:%?30?%}.regBtn[data-v-eebc4fac]::after{display:none}.login-bg[data-v-eebc4fac]{background-image:url('+s+");background-size:100%;background-repeat:no-repeat;border-top:1px solid #fff}.login-btn[data-v-eebc4fac]{background:#3f87ff!important;border-radius:34px!important}.step[data-v-eebc4fac]{display:-webkit-box;display:-webkit-flex;display:flex;width:60%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:%?20?% auto}.step-btn[data-v-eebc4fac]{width:%?80?%;height:%?80?%;line-height:%?80?%;text-align:center;border-radius:50%;background-color:#cbcdd0;color:#fff}.step .step-btn1[data-v-eebc4fac]{line-height:%?40?%}.step .line[data-v-eebc4fac]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin:0 %?20?%;border-top:1px dashed #d2c2c2}.step-btn.active[data-v-eebc4fac]{background-color:#1d76fb}",""]),e.exports=t},"6cba":function(e,t,n){"use strict";var i=n("ee27");n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("6ebd")),o=i(n("ca5b")),s={components:{},data:function(){return{openId:"",hasAccount:!1,loginName:"",password:"",active:0,steps:[{title:"登录"},{title:"认证&绑定"}],code:"",seconds:10,count:60,timer:null,show:!0}},onLoad:function(){var e=this.getUrlParam("code"),t=this;null!=e&&this.getOpenId(e),uni.$once("registered",(function(){t.hasAccount=!0,t.active=1}))},methods:{login:function(){if(""!=this.loginName)if(""==this.password)o.default.showToast("请输入登录密码");else{o.default.showLoading();var e={openId:uni.getStorageSync("openid"),loginName:this.loginName,password:this.password};a.default.apiPost("/tob/user/login",e).then((function(e){"0"==e.code?(uni.setStorageSync("usertype","dw"),uni.setStorageSync("openid",e.data.openId),uni.setStorageSync("userinfo",e.data),uni.switchTab({url:"/pages/index/index"}),o.default.hideLoading()):(o.default.hideLoading(),o.default.showToast(e.msg))})).catch((function(e){o.default.hideLoading(),o.default.showToast(e)}))}else o.default.showToast("请输入用户名")},rz:function(){uni.setStorageSync("usertype","dw"),uni.switchTab({url:"/pages/index/index"})},getCode:function(){var e=this;e.settimer()},settimer:function(){var e=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval((function(){e.count>0&&e.count<=60?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)}),1e3))},gotoRegistration:function(){uni.navigateTo({url:"registration"})},gotoForgetPassword:function(){uni.navigateTo({url:"forget-password"})},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.href.split("#")[0],i=n.split("?")[1];if(i){var a=i.substr(0).match(t);return null!==a?unescape(a[2]):null}return null},getOpenId:function(e){o.default.showLoading();var t={code:e},n=this;a.default.apiGet("/toc/tocUser/getOpenId",t).then((function(e){"0"==e.code?(o.default.hideLoading(),n.openId=e.openId,uni.setStorageSync("openid",e.openId),n.findUser()):(o.default.hideLoading(),o.default.showToast("请在微信环境下打开"))})).catch((function(e){o.default.hideLoading(),o.default.showToast("网络错误")}))},findUser:function(){o.default.showLoading();var e={openId:this.openId,userType:1},t=this;a.default.apiGet("/toc/tocUser/find",e).then((function(e){"0"==e.code?(uni.setStorageSync("usertype","dw"),uni.setStorageSync("openid",t.openId),uni.setStorageSync("userinfo",e.data),uni.switchTab({url:"/pages/index/index"})):"3"==e.code?(t.active=1,t.hasAccount=!0):uni.redirectTo({url:"./registration?userType=1"}),o.default.hideLoading()})).catch((function(e){o.default.hideLoading(),o.default.showToast("网络错误")}))}}};t.default=s},"6ffc":function(e,t,n){"use strict";n.r(t);var i=n("6cba"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},c5ca:function(e,t,n){"use strict";var i=n("2f9c"),a=n.n(i);a.a},c90d:function(e,t,n){"use strict";n.r(t);var i=n("16d6"),a=n("6ffc");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("c5ca");var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"eebc4fac",null,!1,i["a"],s);t["default"]=r.exports},ca5b:function(e,t,n){"use strict";var i=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=i(n("c964"));if(!o)var o={};function s(){return c.apply(this,arguments)}function c(){return c=(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.showLoading({title:"请等待",mask:!0});case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function r(){return u.apply(this,arguments)}function u(){return u=(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.hideLoading();case 1:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function d(e){return l.apply(this,arguments)}function l(){return l=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.showToast({title:t||t.msg,mask:!0,icon:0==t.status?"success":"",duration:1500});case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}o.PATH="http://47.103.152.26/api";var f={showLoading:s,hideLoading:r,showToast:d};t.default=f}}]);